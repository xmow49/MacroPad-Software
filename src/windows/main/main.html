<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <link href="main.css" rel="stylesheet">
    <link href="connectMacropadPopup.css" rel="stylesheet">
    <link href="selectMacropadPopup.css" rel="stylesheet">
    <link href="profileEditor.css" rel="stylesheet">

    <link href="overview.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/@mdi/font@6.4.95/css/materialdesignicons.min.css" rel="stylesheet">


</head>

<body>
    <header>
        <button class="navbarButton closeBtn" onclick="closeBtn()"><svg  width="12" height="12" viewBox="0 0 12 12" fill="none">
            <path d="M12 1.20857L10.7914 0L6 4.79143L1.20857 0L0 1.20857L4.79143 6L0 10.7914L1.20857 12L6 7.20857L10.7914 12L12 10.7914L7.20857 6L12 1.20857Z" fill="#3C3C3C"/>
            </svg></button>
        <button class="navbarButton max-minBtn" onclick="minimizeWindowBtn()"><svg width="15" height="15" viewBox="0 0 15 15" fill="none">
                <path d="M13.6364 12.2727H15L15 1.36364C15 0.613636 14.3864 0 13.6364 0L2.72727 0L2.72727 1.36364L13.6364 1.36364L13.6364 12.2727ZM1.36364 15L10.9091 15C11.6591 15 12.2727 14.3864 12.2727 13.6364L12.2727 4.09091C12.2727 3.34091 11.6591 2.72727 10.9091 2.72727L1.36364 2.72727C0.613636 2.72727 0 3.34091 0 4.09091L0 13.6364C0 14.3864 0.613636 15 1.36364 15ZM1.36364 4.09091L10.9091 4.09091L10.9091 13.6364L1.36364 13.6364L1.36364 4.09091Z" fill="#3C3C3C"/>
                </svg></button>
        <button class="navbarButton resuceBtn" onclick="minimizeBtn()"><svg width="12" height="2" viewBox="0 0 12 2" fill="none">
            <path d="M12 2H0V0H12V2Z" fill="#3C3C3C" />
            </svg></button>
    </header>

    <div id="app-container">

        <div>
            <h1 class="software-title">MacroPad Configurator
                <a id="macropad-id"></a>
            </h1>
            <hr class="ligne">
        </div>

        <div class="backgroud-vector">
            <svg width="1280" height="455" viewBox="0 0 1280 455" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M0 66.7229L26.6667 60.7163C53.3333 54.7097 106.667 42.6965 160 84.7427C213.333 126.789 266.667 222.894 320 252.927C373.333 282.96 426.667 246.921 480 210.881C533.333 174.842 586.667 138.802 640 156.822C693.333 174.842 746.667 246.921 800 240.914C853.333 234.908 906.667 150.815 960 90.7493C1013.33 30.6833 1066.67 -5.35631 1120 0.650287C1173.33 6.65688 1226.67 54.7097 1253.33 78.7361L1280 102.762V319H1253.33C1226.67 319 1173.33 319 1120 319C1066.67 319 1013.33 319 960 319C906.667 319 853.333 319 800 319C746.667 319 693.333 319 640 319C586.667 319 533.333 319 480 319C426.667 319 373.333 319 320 319C266.667 319 213.333 319 160 319C106.667 319 53.3333 319 26.6667 319H0V66.7229Z" fill="#F2F2F2"/>
            <rect y="284" width="1280" height="171" fill="#F2F2F2"/>
            </svg>
        </div>

        <div class="overview">

            <div id="normal-view">
                <div class="settings">
                    <button><span class="mdi mdi-cog-outline"></span></button>
                </div>
                <div class="connect">
                    <button id="connect-status-button" onclick="connectPopup();">Déconnecté<span id="connect-status" class="offline"></span></button>
                </div>
            </div>

            <div id="edit">
                <button onclick="editProfilePopup();"><span class="mdi mdi-pencil"></span></button>
            </div>

            <div id="left" class="popup profile-editor disable">
                <div id="profile-editor-actions">
                    <h3>Choix du profil: </h3>
                    <select onchange="changeProfile();" name="" id="profile-editor-selector">
                        <option value="0">Profil 1</option select>
                        <option value="1">Profil 2</option>
                        <option value="2">Profil 3</option>
                        <option value="3">Profil 4</option>
                        <option value="4">Profil 5</option>
                        <option value="5">Profil 6</option>
                    </select>
                    <!-- <button>Annuler</button>
                    <button>Enregistrer</button> -->

                </div>


                <h3>Nom: <input type="text" id="profile-name" onfocusout="saveProfileName();" maxlength="10"></h3>
                <h3>Icon:</h3>
                <div id="icon-grid">
                    <button class="profile-icon"></button>
                    <button class="profile-icon"></button>
                    <button class="profile-icon"></button>
                    <button class="profile-icon"></button>
                    <button class="profile-icon"></button>
                    <button class="profile-icon"></button>

                    <button class="profile-icon"></button>
                    <button class="profile-icon"></button>
                    <button class="profile-icon"></button>
                    <button class="profile-icon"></button>
                    <button class="profile-icon"></button>
                    <button class="profile-icon"></button>
                </div>
                <h3>Couleur du Profil:</h3>
                <input type="color" id="color-selector">
                <h3></h3>
            </div>

            <div id="right" class="popup profile-editor disable">

                <div id="import-image">
                    <button id="upload-icon">Importer un icon</button>
                    <div class="action-help">
                        <span class="mdi mdi-help-circle"></span>
                        <span class="text-action-help">Choisisez un icon qui va apparaître sur le profile et le Marcopad</span>
                    </div>
                </div>

                <h3 id="select-action-title">Selection des actions</h3>
                <h4 id="current-edition">Cliquez sur une touche pour choisir une action</h4>

                <div id="edit-encoder" class="disable">


                    <div class="action-selector" id="encoder-action-selector" onchange="updateEditGUI('encoder', -1);">
                        <label id="action-selector-1"><input type="radio" name="encoder-action-type" value="-1"><span class="mdi mdi-cancel"></span><span>Désactivé</span></label>
                        <label id="action-selector0"><input type="radio" name="encoder-action-type" value="0"><span class="mdi mdi-volume-source"></span><span>Volume</span></label>
                        <label id="action-selector1"><input type="radio" name="encoder-action-type" value="1"><span class="mdi mdi-monitor"></span><span>Logiciel</span></label>
                        <label id="action-selector2"><input type="radio" name="encoder-action-type" value="2"><span class="mdi mdi-pencil"></span><span>Custom</span></label>
                        <div class="action-help">
                            <span class="mdi mdi-help-circle"></span>
                            <span id="help-text" class="text-action-help">L'encoder va controler le volume principal du systeme. Lors d'un appuis, le son se mute.</span>
                        </div>
                    </div>

                    <!-- affichage pour chaque action-->
                    <div id="encoder-master-volume">

                    </div>

                    <div id="encoder-software-volume">
                        <h4>Choisir un logiciel</h4>
                        <div id="software-div-selector">
                            <select id="software-volume-selector"></select>
                            <button onclick="displayAllSoundSoftwaresInSelector();">Actualiser</button>
                        </div>
                    </div>

                    <div id="encoder-custom" class="disable">
                        <!-- encoder key turn left -->
                        <h3><span class="mdi mdi-rotate-left"></span> Rotation Gauche:</h3>
                        <div class="key-selector">
                            <label id="encoder-edit-key-0" value="" onclick="startKeyCombinationCapture('encoder', 0, 1);"></label>
                            <span id="encoder-edit-key-0-values" style="display: none;"></span>
                            <button id="save-key-combination" onclick="stopKeyCombinationCapture();"><span class="mdi mdi-check"></span></button>
                        </div>

                        <!-- encoder key turn right -->
                        <h3><span class="mdi mdi-rotate-right"></span> Rotation Droite:</h3>
                        <div class="key-selector">
                            <label id="encoder-edit-key-1" onclick="startKeyCombinationCapture('encoder', 1, 1);"></label>
                            <span id="encoder-edit-key-1-values" style="display: none;"></span>
                            <button id="save-key-combination" onclick="stopKeyCombinationCapture();"><span class="mdi mdi-check"></span></button>
                        </div>

                        <!-- encoder key press -->
                        <h3><span class="mdi mdi-bullseye"></span> Clic Encoder</h3>
                        <div class="key-selector">
                            <label id="encoder-edit-key-2" onclick="startKeyCombinationCapture('encoder', 2, 1);"></label>
                            <span id="encoder-edit-key-2-values" style="display: none;"></span>
                            <button id="save-key-combination" onclick="stopKeyCombinationCapture();"><span class="mdi mdi-check"></span></button>
                        </div>
                    </div>

                </div>

                <div id="edit-key" class="disable">

                    <div class="action-selector" id="key-action-selector" onchange="updateEditGUI('key', -1);">
                        <label><input type="radio" name="key-action-type" value="-1"><span class="mdi mdi-cancel"></span><span>Désactivé</span></label>
                        <label><input type="radio" name="key-action-type" value="0"><span class="mdi mdi-keyboard"></span><span>Combinaison</span></label>
                        <label><input type="radio" name="key-action-type" value="1"><span class="mdi mdi-microsoft-windows"></span><span>Système</span></label>
                        <label><input type="radio" name="key-action-type" value="2"><span class="mdi mdi-midi"></span><span>Midi</span></label>
                        <div class="action-help">
                            <span class="mdi mdi-help-circle"></span>
                            <span class="text-action-help">Choisisez un icon qui va apparaître sur le profile et le Marcopad</span>
                        </div>
                    </div>


                    <button>Choisir</button>
                </div>
            </div>

            <!-- /affichage pour chaque action-->


            <div id="macropad-container">
                <div id="profil-list">
                    <button class="profil"></button>
                    <button class="profil"></button>
                    <button class="profil"></button>
                    <button class="profil"></button>
                    <button class="profil"></button>
                    <button class="profil"></button>
                </div>
                <div id="macropad">
                    <div id="macropad-border">
                        <div id="macropad-display">
                            <h4>23:30</h4>
                            <h4>28/10/2021</h4>
                        </div>
                        <div id="macropad-grid">
                            <button class="encoder" onclick="editEncoderBtn(0);"><span id="encoderIcon0" class="mdi"></span></button>
                            <button class="encoder" onclick="editEncoderBtn(1);"><span id="encoderIcon1" class="mdi"></span></button>
                            <button class="encoder" onclick="editEncoderBtn(2);"><span id="encoderIcon2" class="mdi"></span></button>

                            <button id="key0" class="key" onclick="editKeyBtn(0);"><span id="keyIcon0" class="mdi"></span></button>
                            <button id="key1" class="key" onclick="editKeyBtn(1);"><span id="keyIcon1" class="mdi"></span></button>
                            <button id="key2" class="key" onclick="editKeyBtn(2);"><span id="keyIcon2" class="mdi"></span></button>
                            <button id="key3" class="key" onclick="editKeyBtn(3);"><span id="keyIcon3" class="mdi"></span></button>
                            <button id="key4" class="key" onclick="editKeyBtn(4);"><span id="keyIcon4" class="mdi"></span></button>
                            <button id="key5" class="key" onclick="editKeyBtn(5);"><span id="keyIcon5" class="mdi"></span></button>
                        </div>
                    </div>

                </div>
            </div>


        </div>

        <div id="popup-backgroud" class="disable"></div>
        <div id="update-available" class="popup">

            <div class="text">
                <h1>Mise à jour disponible</h1>
                <p>Une mise à jour est disponible !</p>
                <p>Merci d'effectuer la mise à jour rapidement.</p>
                <p>Version actuelle: <a class="current version">1.0</a> </p>
                <p>Nouvelle version: <a class="nex version">1.2</a></p>

            </div>
            <div class="actions">
                <button onclick="updatePopupChanglogBtn();">Voir le changelog</button>
                <button onclick="updatePopupSkipBtn();">Plus tard</button>
                <button onclick="updatePopupUpdateBtn();">Mettre à jour</button>

            </div>

        </div>

        <div id="select-macropad" class="popup">
            <h2>Selectionnez votre MacroPad</h2>
            <div class="macropad-list">
                <button id="0" onclick="selectMacropad(0);"><img  src="images/macropad1.png" alt="" width="200"></button>
            </div>
            <div class="actions">
                <button>Ajouter un MacroPad</button>
            </div>
        </div>

        <div id="connect-macropad" class="popup">
            <h2>Connexion au MacroPad</h2>
            <button onclick="scanSerialsPorts();">Scanner les Ports</button>
            <p id="scan-port-log"></p>
            <progress id="port-scan-progress" class="progress" max="100" value="0"></progress>

            <div class="port-list" id="port-list">
                <!-- JS -->
            </div>

            <div>
                <h3>Nom du MacroPad</h3>
                <div id="set-name">
                    <input type="text" id="macropad-name">
                </div>

            </div>

            </select>

            <div class="actions">
                <button onclick="connectPopupCancel();">Annuler</button>
                <button onclick="connectPopupSave();">Enregistrer</button>
            </div>

        </div>
    </div>


</body>

<script src="main.js"></script>
<script src="port-mannager.js"></script>
<script src="editProfile.js"></script>
<script src="keyboard.js"></script>


</html>